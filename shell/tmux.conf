set -g terminal-overrides 'xterm*:smcup@:rmcup@'

# Disable the mouse
#setw -g mode-mouse off

# Ctrl-r to reload this file
bind C-r source ~/.tmux.conf \; display "Reloaded"

# Splitting windows
bind | split-window -h
bind - split-window -v

# Moving between windows
bind -r h select-pane -L
bind -r j select-pane -D
bind -r k select-pane -U
bind -r l select-pane -R

# Resizing windows
bind -r H resize-pane -L 2
bind -r J resize-pane -D 2
bind -r K resize-pane -U 2
bind -r L resize-pane -R 2

# Switching between windows
bind -n M-Tab next-window

# Set 256 colour
set -g default-terminal "screen-256color"

# Monitor activity
setw -g monitor-activity on
set -g visual-activity on

set -g mouse on

# Status
# set -g window-status-activity-attr underscore
set -g status-left-length 40
set -g status-left ' #[default]'
# set -g status-utf8 on
set -g status-right '#(~/.dotfiles/battery) #(~/.dotfiles/clock)#[default]'
set -g status-right-length 60
set -g status-interval 60
setw -g window-status-format '#[fg=colour241]#I$F #[fg=white]#W#[default] '
setw -g window-status-current-format '#[fg=color241]#I#F #[bg=white,fg=black] #W #[bg=black,fg=white]'

# enable vi keys
setw -g mode-keys vi

# Copy into X's clipboard
# bind C-c run "tmux save-buffer - | xclip -i -sel clipboard"; display "Copied"
# Paste from X's clipboard
# bind C-v run "tmux set-buffer \"$(xclip -o -sel clipboard)\"; tmux paste-buffer"

# =====================================
# ===           Theme               ===
# =====================================

# Feel free to NOT use this variables at all (remove, rename)
# this are named colors, just for convenience
color_orange="colour166" # 208, 166
color_purple="colour134" # 135, 134
color_green="colour076" # 070
color_blue="colour39"
color_yellow="colour220"
color_red="colour160"
color_black="colour232"
color_white="white" # 015

# This is a theme CONTRACT, you are required to define variables below
# Change values, but not remove/rename variables itself
color_dark="$color_black"
color_light="$color_white"
color_session_text="$color_blue"
color_status_text="colour245"
color_main="$color_orange"
color_secondary="$color_purple"
color_level_ok="$color_green"
color_level_warn="$color_yellow"
color_level_stress="$color_red"
color_window_off_indicator="colour088"
color_window_off_status_bg="colour238"
color_window_off_status_current_bg="colour254"

# Nesting local/remote sessions
# Use F12 to toggle keybindings on/off
bind -T root F12  \
    set prefix None \;\
    set key-table off \;\
    set status-style "fg=$color_status_text,bg=$color_window_off_status_bg" \;\
    set window-status-current-format "#[fg=$color_window_off_status_bg,bg=$color_window_off_status_current_bg]$separator_powerline_right#[default] #I:#W# #[fg=$color_window_off_status_current_bg,bg=$color_window_off_status_bg]$separator_powerline_right#[default]" \;\
    set window-status-current-style "fg=$color_dark,bold,bg=$color_window_off_status_current_bg" \;\
    if -F '#{pane_in_mode}' 'send-keys -X cancel' \;\
    refresh-client -S \;\

bind -T off F12 \
  set -u prefix \;\
  set -u key-table \;\
  set -u status-style \;\
  set -u window-status-current-style \;\
  set -u window-status-current-format \;\
  refresh-client -S

set escape-time 0

# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'sunaku/tmux-navigate'

# if you're using QWERTY layout
set -g @navigate-left  '-n M-h'
set -g @navigate-down  '-n M-j'
set -g @navigate-up    '-n M-k'
set -g @navigate-right '-n M-l'
set -g @navigate-back  '-n M-\'

run -b '~/.tmux/plugins/tpm/tpm'
