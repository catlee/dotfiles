---
- defaults:
    link:
        relink: true
        force: true

- clean: ['~']

- create:
    - ~/bin
    - ~/.config/nvim
    - ~/.vim/autoload
    - ~/.tmux/plugins
    - ~/.terminfo/x

- link:
    ~/.tmux.conf: shell/tmux.conf
    ~/.tmux/tmux.conf: shell/tmux.conf
    ~/.aliases: shell/aliases
    ~/.zshrc: shell/zshrc
    ~/.fzf.zsh: shell/fzf.zsh
    ~/.oh-my-zsh: shell/ohmyzsh/
    ~/.p10k.zsh: shell/p10k.zsh
    ~/.gitconfig: gitconfig
    ~/.vimrc: vim/vimrc
    ~/.config/nvim/init.vim: vim/nvim_init.vim
    ~/.config/nvim/nvim.vim: vim/nvim.vim
    ~/.config/nvim/lsp.vim: vim/lsp.vim
    ~/.vim/autoload/plug.vim: vim/vim-plug/plug.vim
    ~/.vim/snippets: vim/snippets
    ~/.terminfo/x/xterm-kitty: shell/xterm-kitty
    ~/bin/tmux_attach: linux/tmux_attach
    ~/.pryrc: shell/pryrc

# Force this to happen after the initial symlink is setup
- link:
    ~/.oh-my-zsh/custom/themes/powerlevel10k: shell/powerlevel10k/

- shell:
    - test -d ~/.tmux/plugins/tpm || git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
    - TMUX_PLUGIN_MANAGER_PATH=$HOME/.tmux/plugins ~/.tmux/plugins/tpm/bin/install_plugins || true
    - nvim +PlugInstall +qall --headless || true
    - nvim +"TSInstallSync all" +qall --headless || true
