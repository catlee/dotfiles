---
- defaults:
    link:
      relink: true

- create:
    - ~/.config/i3
    - ~/.config/py3status

- link:
    ~/bin/disable_screensaver: linux/disable_screensaver
    ~/bin/update_displays: linux/update_displays
    ~/bin/fd: linux/fd
    ~/.config/i3/config: linux/i3_config
    ~/.config/py3status/config: linux/i3status.conf

- shell:
    - sudo apt -o DPkg::Lock::Timeout=60 -y install fd-find ripgrep fzf neovim tmux xsel cmake
    - test -n "$SPIN" || (curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- --profile default -y)
    - test -n "$SPIN" || ~/.cargo/bin/cargo install --git https://github.com/neovide/neovide
